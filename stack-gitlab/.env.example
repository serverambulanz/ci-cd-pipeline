# GitLab CE Environment Variables
# Kopieren nach .env und anpassen

# =============================================
# Security Secrets (BITTE ÄNDERN!)
# =============================================
# Generiere mit: openssl rand -base64 32
POSTGRES_PASSWORD=dein-postgres-passwort-hier

# GitLab Root Password (falls gesetzt, sonst auto-generated)
GITLAB_ROOT_PASSWORD=dein-gitlab-admin-passwort-hier

# =============================================
# Configuration (optional)
# =============================================
# GitLab Edition - Fixed Version für Kompatibilität
GITLAB_CE_VERSION=18.5.1-ce.0

# Performance Settings
GITLAB_SIDEKIQ_CONCURRENCY=25
GITLAB_POSTGRES_SHARED_BUFFERS=256MB
GITLAB_POSTGRES_MAX_CONNECTIONS=200

# =============================================
# Backup Settings
# =============================================
# Backup Schedule (Cron format: Minute Hour Day Month Weekday)
GITLAB_BACKUP_SCHEDULE="0 2 * * *"  # Jeden Tag um 2:00 Uhr

# Backup Retention (Tage)
GITLAB_BACKUP_RETENTION=7

# =============================================
# Resource Limits (aus Performance Guide - optimiert für Production)
# =============================================
# Memory Limits für Container (Performance Guide Werte)
GITLAB_MEMORY_LIMIT=8192m
POSTGRES_MEMORY_LIMIT=4096m
REDIS_MEMORY_LIMIT=2048m
SIDEKIQ_MEMORY_LIMIT=4096m

# CPU Limits (Performance Guide Werte)
GITLAB_CPU_LIMIT=4
POSTGRES_CPU_LIMIT=2
REDIS_CPU_LIMIT=1
SIDEKIQ_CPU_LIMIT=2

# =============================================
# GitLab Runner Settings
# =============================================
# GitLab Runner Registration Token (nach GitLab Setup erstellen)
GITLAB_RUNNER_REG_TOKEN=

# Runner Konfiguration
GITLAB_RUNNER_EXECUTOR=docker
GITLAB_RUNNER_TAGS=docker,local,gitlab
GITLAB_RUNNER_NAME=gitlab-docker-runner
GITLAB_RUNNER_REQUEST_CONCURRENCY=1
GITLAB_RUNNER_OUTPUT_LIMIT=4096

# External URLs
GITLAB_EXTERNAL_URL=http://git.devops.local
GITLAB_SSH_PORT=2222

# =============================================
# Production Performance Settings
# =============================================
# PostgreSQL Performance
POSTGRES_SHARED_PRELOAD_LIBRARIES=pg_stat_statements
POSTGRES_MAX_CONNECTIONS=200

# Redis Performance
REDIS_MAXMEMORY=512mb
REDIS_MAXMEMORY_POLICY=allkeys-lru